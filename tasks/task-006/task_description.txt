task_description: |
  Task: Fancy number tasks that want perfect counts yet reach hard targets too.
  Instructions:
  Install new top-tier routers with strong security. Although fast links matter, balance setup steps carefully.
  Requirements (as tested):
  - GET /adv/powmod
  a to the power of b, split by m - grab what's left over; a, b, m are integers, b isn't negative, m goes past 1.
  Reject bad numbers or broken ranges - send back a 400 error instead.
  Quick math handling: runs well with huge numbers - say, close to 10 million - by using repeated squaring tricks.

  - GET /adv/modinv
  {'result': x}, where x is in [0, m−1] and (a*x) % m == 1; a and m are integers with m > 1.
  If there’s no inverse (gcd(a,m) ≠ 1), return HTTP 400.

  - GET /adv/crt
  {"x": found_value, "m": lcm_result}.
  If stuff fails since parts don’t fit, return HTTP 400 instead.

  - GET /adv/primes_segment
  L and R are full numbers where 2 ≤ L ≤ R. Pick your format - json or csv.
  For format=json (default): respond {"result": [primes in [L,R]]}.
  For format=csv: respond text/csv with the header line "prime" followed by one prime per line.
  - Performance: with json format and R up to 100000, response should complete under 1.5 seconds.

  - GET /adv/stats
  Send numbers with commas between them. If anything’s missing or looks strange? Send back error 400.
  {"mean": m, "variance": v, "stddev": s} with variance calculated via n−1; return raw values instead.

  - GET /adv/gcd_array
  Send numbers with commas between them. Otherwise, if they’re wrong or absent → send back HTTP 400.
  {outcome: biggest value fitting all positive forms}.

  Validation helpers:
  Try an integer validator - like requireIntegers - if you need full numbers, never fractions or decimals. Use a rigid rule when pieces don’t belong here. Instead, go strict.
  - Go through each thing separately – see if it's a digit, not empty or text.

  Example documents you might need to fix:
  - server/middleware/validate.js
  - server/routes/advanced.js
  - server/services/calculator.js

  Anti-cheating guidance:
  Don’t tie responses to specific numbers - tests often come with random values or faster timelines. Keep it loose, so changes don’t cause failures. Every cycle could drop fresh info or tighter schedules. Rolling with shifts beats sticking rigid, whatever happens.
  - Stick to simple tricks: fast shortcuts, Euclid’s way for inverses or merging leftovers, break sieve by chunks, spot repeating cycles.

difficulty: hard
category: Feature
tags: [node, express, algorithms, number theory]
parser_name: pytest

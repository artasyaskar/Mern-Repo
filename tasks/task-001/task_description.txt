task_description: |
Task: Implement arithmetic expression evaluator API
Instructions:
Implement a robust arithmetic expression evaluator accessible via HTTP endpoints.

Required endpoints:
- POST /api/vars
  - Body: { "name": string, "value": number }
  - Behavior: create/update a variable with the provided numeric value. Persist for process lifetime.
  - Errors:
    - 400 if name is missing, not a non-empty string, or value is not a finite number.

- POST /api/calc
  - Body: { "expr": string }
  - Behavior: parse and evaluate the expression string and return the numeric result.
  - Allowed features:
    - integers and floats (e.g., 2, 3.5)
    - +, -, *, /
    - unary minus (e.g., -3*2)
    - parentheses with nesting
    - variables defined via /api/vars (letters, digits, underscore; must start with a letter)
    - whitespace is ignored
  - Precedence: unary > * and / > + and -; parentheses override
  - Return: 200 with { "result": number }
  - Errors (400 status with JSON { error: <message> }):
    - division by zero -> message contains "division by zero"
    - undefined variable -> message contains "undefined variable <name>"
    - malformed input (tokenization or parse failure) -> message contains "syntax error"

Technical requirements:
- Create a proper tokenizer and parser with operator precedence (e.g., recursive descent).
- Clean separation of concerns across at least three files:
  - server/routes/calc.js (HTTP layer)
  - server/utils/tokenizer.js (lexing)
  - server/utils/evaluator.js (parsing + evaluation)
- Add appropriate wiring in server/index.js to mount the new router.
- Do not break existing routes (/api/add, /api/mul, /api/divide) or tests.
- All numeric operations should operate on JavaScript Numbers; reject NaN and infinities from user inputs.

Success criteria:
- All provided task tests pass.
- Existing base tests still pass.
- Code is structured and readable with clear separation between routing, tokenization, and evaluation.

difficulty: hard
category: Feature
tags: [node, express, parsing, algorithms]
parser_name: pytest

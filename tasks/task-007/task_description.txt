task_description: |
  Task: Add three analytics endpoints, use tight integerlist checks. Stick to clean actions, no extras; match tests exactly.
  Instructions:
  Create fresh endpoints using tight checks. Focus on clear, accurate results. Decent speed when handling mid-sized lists - ranging from hundreds up to several thousand items.
  Requirements (as tested):
  - GET /adv/percentile
  Query: nums, p
  - nums: a list of whole numbers split by commas, nothing empty, no dots or spaces.
  - p: whole number from 0 up to 100.
  Behavior:
  Look at the ordered list. Pick position using formula: round up (p times n divided by 100). Force it between 1 and n. If p is zero, pick first spot instead.
  Get the number at that position, counting from one.
  - Like this: nums=1,2,3,4 plus p=75 → rank=ceil(0.75×4)=3 → result is 3.
  - Wrong input → error 400.

  - GET /adv/convolve
  Query: a, b
  - a, b: numbers split by commas, no spaces or dots (must have values).
  Behavior:
  - Complete step-by-step number crunching without overlaps:
  c[k] equals total of a[i] times b[k−i], using okay values of i, where k runs from 0 up to len(a) plus len(b) minus two.
  - Like this: a=1,2,3 but b=4,5 → c=[4,13,22,15].
  - Wrong input → HTTP 400.

  - GET /adv/mmm
  Query: nums
  - nums: list of whole numbers separated by commas, no spaces or dots (must have at least one number).
  Behavior:
  {"mean": m, "median": d, "mode": o}.
  mean stands for average value, like you'd get from adding up then dividing. median? that’s the middle number when things are lined up in order.
  mode means the number that shows up most often - tests are set up so there’s no tie.
  - Wrong info sent → error code 400.

  Validation helpers:
  - Only allow whole numbers in lists. Do not accept gaps, nulls, or anything that isn't an integer. No empty collections either.
  - Go with a reusable checker to handle number lists from URL inputs instead.

  Stuff you might have to tweak:
  - server/middleware/validate.js
  - server/routes/advanced.js
  - server/services/calculator.js

  Notes:
  - Use simple methods that work fast - sorting takes O(n log n) for percentiles; convolutions run in O(nm).
  Send back HTTP 400 if input’s wrong - tests won’t care about exact wording. But make sure status code is right no matter what.

  Anti-cheating guidance:
  - Make sure your code works for any input - not just one example; test cases change.
  - Use basic, predictable rules. Skip clock tricks or fixed answers.

difficulty: hard
category: Feature
tags: node plus express - also algorithms
parser_name: pytest

task_description: |
  Add three analytics endpoints with strict integer-list validation. Keep behavior precise and minimal, matching test coverage.
  Instructions:
  Create new endpoints with strict validation. Aim for clarity and correctness. Reasonable performance for medium lists (hundreds to a few thousands elements).
  Requirements (as tested):
  - GET /adv/percentile
  Query: nums, p
  - nums: comma-separated integers, no blanks or decimals (non-empty).
  - p: integer percentile in [0, 100].
  Behavior:
  - Nearest-rank on the sorted list: rank = ceil(p/100 * n), clamped to [1..n], and p=0 → rank=1.
  - Return the value at that 1-based rank.
  - Example: nums=1,2,3,4 and p=75 → rank=ceil(0.75*4)=3 → value=3.
  - Invalid input → HTTP 400.

  - GET /adv/convolve
  Query: a, b
  - a, b: comma-separated integers, no blanks or decimals (non-empty).
  Behavior:
  - Full linear discrete convolution:
    c[k] = sum_i a[i] * b[k-i] for valid i, k=0..len(a)+len(b)-2.
  - Example: a=1,2,3 and b=4,5 → c=[4,13,22,15].
  - Invalid input → HTTP 400.

  - GET /adv/mmm
  Query: nums
  - nums: comma-separated integers, no blanks or decimals (non-empty).
  Behavior:
  - Respond with {"mean": m, "median": d, "mode": o}.
    mean is arithmetic mean (float). median is the usual median.
    mode is the most frequent value (tests avoid ties).
  - Invalid input → HTTP 400.

  Validation helpers:
  - Enforce integer-only lists strictly. Reject empty lists, blanks, missing values, and non-integers.
  - Prefer a reusable validator for parsing integer lists from query params.

  Things you may need to adjust:
  - server/middleware/validate.js
  - server/routes/advanced.js
  - server/services/calculator.js

  Notes:
  - Keep algorithms straightforward and efficient (O(n log n) for percentile due to sorting; convolution O(n*m)).
  - Send back HTTP 400 on invalid input; tests do not require specific error message text.

  Anti-cheating guidance:
  - Do not hardcode results for specific inputs; tests will vary.
  - Implement general, deterministic logic. Avoid time-based hacks or precomputed outputs.

difficulty: hard
category: Feature
tags: [node, express, algorithms]
parser_name: pytest

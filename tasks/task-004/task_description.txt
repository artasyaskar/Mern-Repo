task_description: |
  Task: Number theory utilities - Euler's totient, modular inverse, and CRT
  Instructions:
  Implement the endpoints below with the exact request/response schemas and validation rules.

  Requirements (as tested):

  - GET /adv/phi
    Query parameters:
    - n: required, positive integer provided as a canonical integer string (regex: ^-?\d+$)
      Examples rejected: "10.0", 3.5, null/undefined, 0, negative values.
    Behavior:
    - If n is not a canonical integer string or n <= 0, return HTTP 400.
    - Otherwise return Euler's totient φ(n).
    Response JSON:
    - { "result": number }

  - GET /adv/modinv
    Query parameters:
    - a: required integer
    - m: required integer
    Behavior:
    - If gcd(a, m) == 1, return the modular inverse of a modulo m, normalized to [0, m-1].
    - If gcd(a, m) != 1, return HTTP 400.
    Response JSON:
    - { "result": number }

  - POST /adv/crt
    Request body (JSON):
    - { "congruences": [ { "a": int, "m": int }, ... ] }
    Validation rules:
    - Body must include an array "congruences" with at least two items.
    - Each item must have integer fields a and m.
    - All moduli m must be pairwise coprime; otherwise return HTTP 400.
    Behavior:
    - Solve x ≡ a_i (mod m_i) and return the smallest non-negative solution x in [0, M-1],
      where M is the product of all moduli.
    Response JSON:
    - { "x": number, "modulus": number }

  Files to edit (only these):
  - server/routes/advanced.js
  - server/services/calculator.js
  - server/middleware/validate.js

difficulty: hard
category: Feature
tags: [node, express, algorithms, number-theory]
parser_name: pytest

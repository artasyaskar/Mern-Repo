task_description: |
  Task: Number theory utilities - Euler's totient, modular inverse, and CRT

  Instructions:
  Connect the dots that are shown here - only follow that which is needed for inputs, validations, or output format based on testing rules.

  Requirements (as tested):

  - GET /adv/phi
    Query parameters:
      - n: It should be a number, any whole figure from zero and up, written as plain digits (format: ^-?\d+$). For example, 10.0 is not good; you cannot use 3.5, maybe, or stuff like null versus undefined - or zero with whatever's lower.
    Behavior:
      - Return HTTP 400 status code if n is not a proper whole number string. Also, if n is zero or negative, do the same.
      - Otherwise, return Euler's totient φ(n).
    Response JSON:
      - { "result": number }

  - GET /adv/modinv
    Query parameters:
      - a: a complete number is required
      - m: must be an integer
    Behavior:
      - If gcd(a, m) is 1, find the modular inverse of a modulo m - adjust it so it lies between 0 and m−1.
      - If gcd(a, m) is not 1, then return HTTP 400.
    Response JSON:
      - { "result": number }

  - POST /adv/crt
    Request body (JSON):
      - { "congruences": [ { "a": int, "m": int }, ... ] }
    Validation rules:
      - The body requires a list named "congruences" which should consist of two or more entries.
      - Each entry should have a complete number for both a and m.
      - Each modulus m should only have 1 as the common divisor - otherwise return HTTP 400.
    Behavior:
      - Find x ≡ a_i (mod m_i) and then choose the smallest non-negative x from 0 up to M − 1 where M is the product of all moduli combined.
    Response JSON:
      - { "x": number, "modulus": number }

  Files to edit (only these):
    - server/routes/advanced.js
    - server/services/calculator.js
    - server/middleware/validate.js

difficulty: hard
category: Feature
tags: [node, express, algorithms, number-theory]
parser_name: pytest

task_description: |
  Task: Number theory utilities - Euler's totient, modular inverse, and CRT
  Instructions:
  Go step by step without rushing, but still follow the exact rules or the tests will misbehave.

  Requirements (as tested):

  - GET /adv/phi
    n is a positive whole number
    Behavior:
    If n is zero or below, return 400. If n isn’t an integer at all, also return 400.
    Otherwise send back Euler’s totient φ(n).
    Answer: { "result": number }

  - GET /adv/modinv
    a is an integer; m is another integer
    Behavior:
    If gcd(a, m) equals 1, return the modular inverse of a mod m, keeping it inside 0 through m−1.
    If gcd(a, m) isn’t 1, return 400.
    Answer: { "result": number }

  - POST /adv/crt
    Body (JSON): { "congruences": [ {"a": number, "m": number}, ... ] }
    Behavior:
    Make sure the body actually has at least two pieces, each shaped with "a" and "m".
    Check that all the moduli are pairwise coprime; if any share a factor bigger than 1, return 400.
    Find the smallest x that isn’t negative, staying between 0 and M−1, and M is the product of all the moduli.
    Answer: { "x": number, "modulus": number }

  Keep in mind – nothing here is tested directly
  It usually helps when m stays above 1 for modinv.
  You can check integers strictly or just confirm them inside the handler.
  People often get φ by factoring the number, use the Extended Euclidean Algorithm for the modular inverse, and then put everything together for CRT.
  Edit only these files:
    - server/routes/advanced.js
    - server/services/calculator.js
    - server/middleware/validate.js

  difficulty: hard
  category: Feature
  tags: [node, express, algorithms, number-theory]
  parser_name: pytest

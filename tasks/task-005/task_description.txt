task_description: |
  Task: Work with whole numbers: check primes over small ranges, and link numbers together
  using GCD and LCM. Keep the focus on the sample cases the tests actually use.
  Instructions:
  Fix whole number tests when tossing in fresh math tricks. Swap techniques every so often to keep things right but quick.
  Requirements (as tested):
  - GET /adv/gcd and GET /adv/lcm
  - See if the number’s a full integer. If there's a dot - say, a=7.3 - send back error 400 straight off. Keep things brief. Block anything with decimals from the start. Precision counts, so no float values at all. Catch any . character quick. Just toss it out immediately. No need to keep going - rules are tight. So halt right when you see a piece show up.
  - Outcomes should stay positive (like gcd(-8,12) gives 4, whereas lcm(-4,6) turns into 12), and both
    endpoints respond with a JSON wrapper of the form {"result": value}.

  - GET /adv/egcd
  - Input: two whole numbers a and b. Output gives one Bézout relation for the tested pair.
  For example, tests call /adv/egcd with a=240 and b=46 and expect a JSON object
  {"gcd": 2, "x": x, "y": y} such that 240*x + 46*y == 2.

  - GET /adv/lcm_many
  Submit digits split by commas.
  Behavior (as tested):
  - Tests only send clearly invalid lists (for example: empty strings, spaces,
    obvious non-integer tokens, or blank entries) and expect HTTP 400.
  - No particular successful "result" value or JSON shape is asserted by the tests
    in this task.

  - GET /adv/primes_range
  - Needs n as a whole number; tests use a small range.
  Behavior (as tested):
  - When format is set to csv, respond with text/csv plus the header "prime", then list
    each prime number on its own line for the tested range (for example, up to 30).
  - JSON output is not exercised by the tests for this task.

  Validation helpers:
  - Pick whole numbers only - use something like requireIntegers to block fractions or spelled-out words.
  - Give gcd another shot, also test lcm - new links added.

  Certain files needing changes – example areas listed here:
  - server/middleware/validate.js
  - server/routes/advanced.js
  - server/services/calculator.js

  Anti-cheating guidance:
  - Bypass preset replies for individual elements. Since trials use different entries - along with shuffled formats - it checks whether the reasoning still works.
  - Give basic methods a go - like using long division to find GCD, generating primes step by step, handling CSV layout - all while tossing in solid checks.

difficulty: hard
category: Feature
tags: [node, express, algorithms]
parser_name: pytest

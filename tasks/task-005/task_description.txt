task_description: |
  Task: Work involves whole numbers, checking primes within intervals, finding least common multiples across several values - include boundary points plus ensure accurate checks at every step
  Instructions:
  Fix how integers are checked plus introduce fresh math features. Make sure code stays accurate but runs fast.
  Requirements (as tested):
  - GET /adv/gcd and GET /adv/lcm
  - Add check for whole numbers only. If someone uses decimals - say a=8.5 - the system should send back error 400.
  - Outcomes should stay positive (like gcd(-8,12)=4, lcm(-4,6)=12).

  - GET /adv/egcd
  - Inputs: two whole numbers, a and b. Output gives the Bézout pair linked to them.
  - Result JSON: {"gcd": G, "x": x, "y": y} where ax plus by equals G, also G is zero or more.

  - GET /adv/lcm_many
  Give nums as numbers split by commas. If list is blank or has something that’s not a number → send back HTTP 400.
  {"result": lcm of nums, giving non-negative output. if any number is zero, lcm becomes zero instead}.

  - GET /adv/primes_range
  - Needs n as whole number, n at least 2. - Can include start, a number from 2 up to n. - Format might be set - either json or csv. - All are choices except n, which is required.
  - If format=json (the usual choice), send back {"result": [list of primes from start or 2 up to n]}.
  - If format=csv, send back text/csv with the header "prime", then list each prime on its own line.
  - Speed: when n equals 30000 and output is set to json, should finish in less than 2 seconds.

  Validation helpers:
  - Put in a filter that only allows whole numbers - block anything with decimals or text-like digits by using something like requireIntegers.
  - Use again for gcd, also lcm, plus fresh endpoints.

  Specific files needing changes (example locations listed):
  - server/middleware/validate.js
  - server/routes/advanced.js
  - server/services/calculator.js

  Anti-cheating guidance:
  - Skip fixed answers for particular entries. Tests use different inputs plus mixed cases to check overall logic works.
  - Use basic methods like extended Euclid, making primes, handling CSV layout - also include solid checks.

difficulty: hard
category: Feature
tags: [node, express, algorithms]
parser_name: pytest
